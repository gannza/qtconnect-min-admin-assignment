const ValidationRule = require('../contracts/ValidationRule');
const ValidationResult = require('../ValidationResult');

/**
 * Validates that a field is required (not null, undefined, or empty string)
 */
class RequiredRule extends ValidationRule {
  constructor() {
    super();
  }

  async validate(value, fieldName, data) {
    const result = new ValidationResult();

    if (value === null || value === undefined || value === '') {
      result.addError(fieldName, this.getErrorMessage(fieldName, value), this.getName());
    }

    return result;
  }

  getErrorMessage(fieldName, value) {
    return `The ${fieldName} field is required.`;
  }

  getName() {
    return 'required';
  }
}

module.exports = RequiredRule;
